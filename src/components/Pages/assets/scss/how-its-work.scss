// How it works
.how-it-works {
  margin: 0 -1rem;
  font-family: var(--primary-font-family);

  &__header {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    background-image: url('../../../../assets/images/how-it-works-header-logo.webp'), url('../../../../assets/images/how-it-works-bg.webp');
     @supports (-ms-ime-align: auto) {
      background-image: url('../../../../assets/images/how-it-works-header-logo.png'), url('../../../../assets/images/how-it-works-bg.jpg');
      }
      @supports (-ms-accelerator: true) {
      background-image: url('../../../../assets/images/how-it-works-header-logo.png'), url('../../../../assets/images/how-it-works-bg.jpg');
      }
      @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
      background-image: url('../../../../assets/images/how-it-works-header-logo.png'), url('../../../../assets/images/how-it-works-bg.jpg');
      }
      @supports (display:-ms-grid) {
      background-image: url('../../../../assets/images/how-it-works-header-logo.png'), url('../../../../assets/images/how-it-works-bg.jpg');
      }
      @media not all and (min-resolution:.001dpcm) {
      background-image: url('../../../../assets/images/how-it-works-header-logo.png'), url('../../../../assets/images/how-it-works-bg.jpg');
      }
    background-size: auto, cover;
    background-position: center bottom, center;
    background-repeat: no-repeat;
    min-height: 405px;
    color: var(--white);
    text-align: center;
    position: relative;
    padding: 0 1rem;

    &::after {
      content: '';
      display: block;
      --size: 78px;
      width: var(--size);
      height: var(--size);
      position: absolute;
      left: calc(50% - (var(--size) / 2));
      bottom: calc(-1 * (var(--size) / 2));
      --logo: url('data:image/svg+xml;utf-8,<svg width="78" height="78" viewBox="0 0 78 78" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="39" cy="39" r="39" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M41.5326 19.0006C45.6026 19.535 49.4033 21.3274 52.4026 24.1268C55.402 26.9262 57.4497 30.5925 58.2591 34.6122L51.4586 33.8908C50.7997 32.083 49.7523 30.4414 48.3902 29.0812C46.6291 27.3277 44.4136 26.0993 41.9923 25.5339L41.5326 19.0006ZM36.1174 25.5339C33.9845 26.014 32.0046 27.0163 30.3559 28.4506C28.7071 29.8849 27.4413 31.7062 26.6722 33.7505L19.8516 34.4723C20.6807 30.4753 22.7379 26.8363 25.7362 24.0628C28.7346 21.2893 32.5246 19.5194 36.578 19L36.1174 25.5339ZM27.3935 44.6928C28.5277 46.792 30.2099 48.5452 32.2616 49.7661C34.3132 50.987 36.6576 51.6301 39.0457 51.627C40.7825 51.6332 42.5031 51.2944 44.1076 50.6303C45.7121 49.9663 47.1683 48.9902 48.3917 47.7589C49.1948 46.9651 49.8894 46.0689 50.4574 45.0934L56.3729 47.5388C54.7109 50.6923 52.2189 53.333 49.1654 55.1764C46.1119 57.0198 42.6127 57.996 39.0448 57.9998C36.4705 58.0046 33.9207 57.5007 31.5422 56.517C29.1637 55.5333 27.0036 54.0893 25.1862 52.2682C23.6796 50.7625 22.427 49.023 21.4771 47.1174L27.3935 44.6928Z" style="fill: rgb(19, 44, 82)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M35.125 34.5856C37.814 34.9199 40.534 34.9199 43.223 34.5856C43.0426 36.0281 43.223 36.0098 43.2951 36.5511C38.5338 37.6517 40.0488 37.7593 34.8363 36.5511C35.0346 35.7218 35.125 35.6856 35.125 34.5856ZM16.3867 37.3803V39.9046H21.7075C21.477 40.3593 21.3691 40.8662 21.3944 41.3752C21.4197 41.8842 21.5773 42.3779 21.8517 42.8076C22.9159 44.6828 25.4409 44.9533 26.7947 43.0419C27.6605 41.834 27.408 41.2207 27.2984 39.9043H31.2109C31.5355 43.8711 37.9384 48.7578 43.9619 44.268C45.044 43.4567 46.4507 41.5453 46.577 39.9043H50.7794C49.3545 45.8545 57.7412 45.7825 56.3707 39.9043H61.4027V37.6684C60.3565 37.6322 58.6791 37.291 57.7232 37.1454L47.9305 35.7576C46.2892 35.5234 47.1009 36.1904 46.2892 34.0447L45.0808 31.899C44.4441 31.0299 43.5927 30.3403 42.6097 29.8977C40.6621 28.8879 40.9325 29.8977 40.6262 27.4095C40.4634 26.129 40.1571 25.1019 40.1571 23.4062H37.6321C37.6321 24.9569 37.4517 25.7334 37.2543 27.2114C36.9476 29.3571 36.8935 29.2489 36.118 29.4473C35.4505 29.6096 34.1701 30.0606 32.8355 31.7374C31.7354 33.1258 31.7713 33.7028 31.2663 34.6585C30.7626 35.6504 31.3384 35.2897 28.1463 35.7224L16.3867 37.3803Z" style="fill: rgb(3, 178, 216)"/></svg>');
      background-image: var(--logo);
      background-size: 100%;
      z-index: 1;
    }
  }
  &__header-description {
    font-size: 16px;
    line-height: 22px;
    margin: 0;
    max-width: 645px;
  }
  &__header-title {
    font-weight: bold;
    font-size: 40px;
    line-height: 1;
    margin: 0 0 13px;
    font-family: inherit !important;
  }

  &__body {
    padding: 90px 0;
  }
  &__grid {

    &--ik {
      margin: 0 0 75px !important;
    }
    // &--idk {
    //   .column {

    //     &:first-child {
    //       &::before {
    //         content: '';
    //         display: block;
    //         width: 1px;
    //         height: 100%;
    //         position: absolute;
    //         top: 18px;
    //         right: .5px;
    //         border-left: 1px dashed rgba(var(--dark-rgb), .25);
    //       }
    //       // &::after {
    //       //   content: '';
    //       //   display: block;
    //       //   --size: 24px;
    //       //   width: var(--size);
    //       //   height: var(--size);
    //       //   position: absolute;
    //       //   top: 18px;
    //       //   right: calc((-1 * (var(--size) / 2)) + 1px);
    //       //   box-shadow: 0 0 0 1px rgba(var(--dark-rgb), .25), 0 0 0 8px var(--white) inset, 0 0 0 24px var(--dark) inset;
    //       //   border-radius: 50%;
    //       // }
    //     }
    //   }

    //   &:not(:first-child) {
    //     .column {
    //       &:first-child {
    //         &::before {
    //           height: calc(100% + 28px);
    //           top: 11%;
    //         }
    //       }
    //     }
    //   }
    // }

    // .column {
      // height: auto !important;
      // height: 100% !important;
      // display: flex !important;
      // align-content: center;
      // align-items: center;
    // }
  }

  &__title {
    margin: 0 0 55px;
    color: var(--medium-blue);
    font-weight: bold;
    font-size: 26px;
    line-height: 1.25;
    text-align: center;
    font-family: inherit !important;
    width: 100%;
  }

  &__section {
    // align-items: center !important;

    &--ik {
      padding: 30px 0 !important;
    }
    &--idk {
      padding: 15px 0 !important;

      // .how-it-works__section {
      //   &-content {
      //     > span {
      //       &::after {
      //         left: calc(-1 * (45px + 1rem + (var(--size) / 2)));
      //         right: initial;
      //       }
      //     }

      //     &--right {
      //       > span {
      //         &::after {
      //           right: calc(-1 * (43px + 1rem + (var(--size) / 2)));
      //           left: initial
      //         }
      //       }
      //     }
      //   }
      // }

      // &:last-child {
      //   .column {
      //     &:first-child {
      //       &::before {
      //         height: 18%;
      //       }
      //     }
      //   }
      // }
    }

    &-content {
      max-width: 480px;
      width: 100%;
      // display: flex;
      // align-items: center;
      // flex-direction: column;
      // align-items: flex-start;

      &--right {
        text-align: right;
      }

      > span,
      h3 {
        font-size: 20px;
      }
      > span {
        font-weight: 600;
        color: var(--medium-blue);
        display: block;
        line-height: 1;
        position: relative;

        // &::after {
        //   content: '';
        //   display: block;
        //   --size: 24px;
        //   width: var(--size);
        //   height: var(--size);
        //   position: absolute;
        //   top: 50%;
        //   right: calc((-1 * (var(--size) / 2)) + 1px);
        //   box-shadow: 0 0 0 1px rgba(var(--dark-rgb), .25), 0 0 0 8px var(--white) inset, 0 0 0 24px var(--dark) inset;
        //   border-radius: 50%;
        //   transform: translateY(-50%);
        // }
      }
      h3 {
        font-weight: bold;
        color: var(--dark);
        margin: 0;
        font-family: inherit !important;
        line-height: 1.9;
      }
      p {
        font-size: 16px;
        line-height: 26px;
        color: var(--grey2);
        margin: 0;
      }
    }
    &-img {
      text-align: center;
      margin: auto;
    }
  }



  @media (min-width: 768px) and (max-width: 991px) {
    &__section {
      &-img {
        display: flex;
        align-items: center;
      }
      &-content {
        max-width: 320px;
        margin-top: -25px;
        // margin: 0 auto;
      }

      &--idk {
        .how-it-works__section {
          &-content {
            margin-left: auto;

            // > span {
            //   &::after {
            //     left: calc(-1 * (9px + 1rem + (var(--size) / 2)));
            //   }
            // }

            &--right {
              margin-right: auto;
              margin-left: initial;

              // > span {
              //   &::after {
              //     right: calc(-1 * (7px + 1rem + (var(--size) / 2)));
              //     left: initial
              //   }
              // }
            }
          }
        }
        // &:last-child {
        //   .column {
        //     &:first-child {
        //       &::before {
        //         height: 14%;
        //       }
        //     }
        //   }
        // }
      }
    }
  }

  @media (min-width: 768px) {
    &__grid {
      .column {
        height: 100% !important;
        display: flex !important;
        align-content: center;
        align-items: center;
      }
    }
  }
  @media (min-width: 992px) {
    &__section {
      &-content {
        margin-top: -50px;
        // &--right {
        //   // align-items: flex-end;
        // }
      }
      &--idk {
        &:nth-child(odd) {
          .how-it-works__section-content {
            margin-left: 44px;
            margin-right: auto;
          }
        }
        &:nth-child(even) {
          .how-it-works__section-content {
            margin-right: 44px;
            margin-left: auto;
          }
        }
      }
    }
    // &__grid {
    //   .column {
    //     height: 100% !important;
    //     display: flex !important;
    //     align-content: center;
    //     align-items: center;
    //   }
    // }
  }

  @media (max-width: 1140px) {
    &__header {
      min-height: 350px;
      background-size: 580px, cover;

      &::after {
        --size: 60px;
      }
    }
    &__header-description {
      font-size: 16px;
      line-height: 22px;
    }
    &__header-title {
      font-size: 32px;
      margin: 0 0 11.4px;
    }

    &__body {
      padding: 70px 0;
    }

    &__title {
      font-size: 21px;
      margin: 0 0 40px;
    }

    &__grid {
      &--ik {
        margin: 0 0 50px !important;
      }
    }

    &__section {
      &--ik {
        padding: 20px 0 !important;
      }

      &-content {
        max-width: 380px;

        > span,
        h3 {
          font-size: 18px;
        }
        p {
          font-size: 14px;
        }
      }
    }
  }
  @media (max-width: 991px) {
    &__section {
      &-img {

        img {
          max-width: 100%;
          object-fit: contain;
        }
      }

      &-content {
        max-width: 320px;
      //   margin-top: -25px;
      //   // margin: 0 auto;
      }
    }
  }

  @media (max-width: 767px) {
    &__header {
      min-height: 300px;
      background-size: 420px, cover;

      &::after {
        --size: 45px;
      }
    }
    &__header-description {
      font-size: 14px;
      line-height: 19px;
    }
    &__header-title {
      font-size: 23.6px;
      margin: 0 0 8px;
    }
    &__body {
      padding: 50px 0;
    }
    &__title {
      font-size: 18px;
      margin: 0 0 25px;
    }

    &__grid {
      &--ik {
        > div:nth-child(odd) {

          .column {
            &:first-child {
              order: 2;
            }
            &:last-child {
              order: 1;
            }
          }
        }
      }

      &--idk {
        // .how-it-works__section {
        //   &-content {
        //     > span {
        //       &::after {
        //         display: none;
        //       }
        //     }
        //   }
        // }

        > div:nth-child(even) {

          .column {
            &:first-child {
              order: 2;
            }
            &:last-child {
              order: 1;
            }
          }
        }

        // .column {
        //   &::before,
        //   &::after {
        //     display: none !important;
        //   }
        // }
      }

    }

    &__section {
      &:not(:last-child) {
        margin-bottom: 35px;
      }

      // &--ik {
      //   padding: 10px !important;
      // }

      &-content {
        max-width: 365px;
        margin: 0 auto;

        &--right {
          text-align: left;
        }
      }

    }
  }

  @media (max-width: 450px) {
    &__section {
      &-content {
        max-width: calc(100% - 20px);
      }
    }
  }
}
